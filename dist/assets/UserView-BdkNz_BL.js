import{s as W,a as G}from"./index-CvRR4B1I.js";import{B as H,U as A,R as J,v as Q,a as s,c as l,b as o,P as $,q as u,t as c,i as r,n as X,g as B,w as g,z as Y,e as _,y as Z,a4 as ee,T as te,k as oe,h as y,d as ae,r as m,S as se,o as ne,C as le,V as re,u as P,s as V,F as ie,f as ce}from"./index-o2anLdNF.js";import{s as de}from"./index-aKao5A2Z.js";import{s as pe}from"./index-DJyijS95.js";import{s as j}from"./index-BQ82LSVU.js";import{a as ue,s as fe}from"./index-CtF5e5-U.js";import{s as me}from"./index-R0X6Kr39.js";import{s as ve}from"./index-7jZXrWGf.js";import{U as E}from"./UserService-CUGCGzV2.js";import{S as ge}from"./ServiceService-CXl9STlF.js";import"./index-HN1c8puf.js";import"./index-BtL0hmx1.js";import"./index-mbz8WqPB.js";import"./index-CrJWY7mn.js";import"./PhotoService-Cjq5erfy.js";var he=function(t){var n=t.dt;return`
.p-panel {
    border: 1px solid `.concat(n("panel.border.color"),`;
    border-radius: `).concat(n("panel.border.radius"),`;
    background: `).concat(n("panel.background"),`;
    color: `).concat(n("panel.color"),`;
}

.p-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: `).concat(n("panel.header.padding"),`;
    background: `).concat(n("panel.header.background"),`;
    color: `).concat(n("panel.header.color"),`;
    border-style: solid;
    border-width: `).concat(n("panel.header.border.width"),`;
    border-color: `).concat(n("panel.header.border.color"),`;
    border-radius: `).concat(n("panel.header.border.radius"),`;
}

.p-panel-toggleable .p-panel-header {
    padding: `).concat(n("panel.toggleable.header.padding"),`;
}

.p-panel-title {
    line-height: 1;
    font-weight: `).concat(n("panel.title.font.weight"),`;
}

.p-panel-content {
    padding: `).concat(n("panel.content.padding"),`;
}

.p-panel-footer {
    padding: `).concat(n("panel.footer.padding"),`;
}
`)},ye={root:function(t){var n=t.props;return["p-panel p-component",{"p-panel-toggleable":n.toggleable}]},header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},be=H.extend({name:"panel",theme:he,classes:ye}),_e={name:"BasePanel",extends:oe,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}}},style:be,provide:function(){return{$pcPanel:this,$parentInstance:this}}},K={name:"Panel",extends:_e,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{id:this.$attrs.id,d_collapsed:this.collapsed}},watch:{"$attrs.id":function(t){this.id=t||A()},collapsed:function(t){this.d_collapsed=t}},mounted:function(){this.id=this.id||A()},methods:{toggle:function(t){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:t,value:this.d_collapsed})},onKeyDown:function(t){(t.code==="Enter"||t.code==="NumpadEnter"||t.code==="Space")&&(this.toggle(t),t.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.header}},components:{PlusIcon:pe,MinusIcon:de,Button:j},directives:{ripple:J}},we=["id"],ke=["id","aria-labelledby"];function xe(e,t,n,w,d,k){var S=Q("Button");return s(),l("div",u({class:e.cx("root")},e.ptmi("root")),[o("div",u({class:e.cx("header")},e.ptm("header")),[$(e.$slots,"header",{id:d.id+"_header",class:X(e.cx("title"))},function(){return[e.header?(s(),l("span",u({key:0,id:d.id+"_header",class:e.cx("title")},e.ptm("title")),c(e.header),17,we)):r("",!0)]}),o("div",u({class:e.cx("headerActions")},e.ptm("headerActions")),[$(e.$slots,"icons"),e.toggleable?(s(),B(S,u({key:0,id:d.id+"_header",class:e.cx("pcToggleButton"),"aria-label":k.buttonAriaLabel,"aria-controls":d.id+"_content","aria-expanded":!d.d_collapsed,unstyled:e.unstyled,onClick:k.toggle,onKeydown:k.onKeyDown},e.toggleButtonProps,{pt:e.ptm("pcToggleButton")}),{icon:g(function(C){return[$(e.$slots,e.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:d.d_collapsed},function(){return[(s(),B(Y(d.d_collapsed?"PlusIcon":"MinusIcon"),u({class:C.class},e.ptm("pcToggleButton").icon),null,16,["class"]))]})]}),_:3},16,["id","class","aria-label","aria-controls","aria-expanded","unstyled","onClick","onKeydown","pt"])):r("",!0)],16)],16),_(te,u({name:"p-toggleable-content"},e.ptm("transition")),{default:g(function(){return[Z(o("div",u({id:d.id+"_content",class:e.cx("contentContainer"),role:"region","aria-labelledby":d.id+"_header"},e.ptm("contentContainer")),[o("div",u({class:e.cx("content")},e.ptm("content")),[$(e.$slots,"default")],16),e.$slots.footer?(s(),l("div",u({key:0,class:e.cx("footer")},e.ptm("footer")),[$(e.$slots,"footer")],16)):r("",!0)],16,ke),[[ee,!d.d_collapsed]])]}),_:3},16)],16)}K.render=xe;const b="/review",$e={async getReviewById(e){return(await y.get(`${b}/${e}`)).data},async getReviewsByServiceId(e){return(await y.get(`${b}/service/${e}`)).data},async getReviewsByUserId(e){return(await y.get(`${b}/influencer/${e}`)).data},async createReview(e){return(await y.post(`${b}`,e)).data},async updateReview(e,t){return(await y.put(`${b}/${e}`,t)).data},async deleteReview(e){return(await y.delete(`${b}/${e}`)).data}},Be={class:"card grid grid-cols-1 md:grid-cols-2 gap-8 items-center h-full"},Se={class:"flex flex-col items-center justify-center"},Ce={class:"font-bold text-2xl mb-4"},Ie={class:"flex flex-col gap-4"},Re={key:0,class:"flex flex-wrap gap-2 w-full"},Ue={key:0,id:"firstname",type:"text"},Pe={key:1,class:"flex flex-wrap gap-2 w-full"},Ve={key:0,id:"lastname",type:"text"},Ne={class:"flex flex-wrap gap-2 w-full"},Le={for:"username",class:"font-bold"},De={key:0,id:"username",type:"text"},Te={class:"flex flex-wrap gap-2 w-full"},Ae={key:0,id:"email",type:"text"},Ee={class:"flex flex-wrap gap-2 w-full"},je={key:0,id:"ruc",type:"text"},Ke={key:2,class:"flex flex-wrap gap-2 w-full"},Oe={key:0,id:"phone",type:"text"},ze={key:3,class:"flex flex-wrap gap-2 w-full"},Fe={key:0,id:"birthdate",type:"text"},Me={class:"flex flex-wrap gap-2 w-full"},qe={key:0,id:"location",type:"text"},We={key:0,class:"flex flex-col gap-8 w-full"},Ge={class:"card w-full"},He={key:0,class:"border border-surface-200 dark:border-surface-700 rounded m-2 p-4 flex flex-col h-full"},Je={class:"mb-4 flex-grow"},Qe={class:"relative mx-auto image-container"},Xe=["src","alt"],Ye={class:"mb-4 font-medium flex-grow"},Ze={class:"flex justify-between items-center mt-auto"},et={class:"mt-0 font-semibold text-xl"},tt={class:"flex flex-col gap-8 w-full mt-8"},ot={class:"card w-full"},at={key:0},st={class:"flex items-center pl-2"},nt=["onClick"],lt={class:"flex flex-wrap items-center justify-end gap-4"},rt={class:"text-surface-500 dark:text-surface-400"},it={class:"m-0 mb-2 text-surface-500 dark:text-surface-400"},ct={class:"flex items-center mb-4"},dt={class:"font-bold m-0 mb-2"},pt={class:"m-0"},ut={key:1},It=ae({__name:"UserView",props:{userId:{}},setup(e){const t=m(null),n=m([]),w=m([]),d=m(!1),k=m(!0),S=m(!0),C=m(!0),I=e,O=m([{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]);se(()=>I.userId,async p=>{d.value=!1,n.value=[],w.value=[];try{await N(p),await L(p),await D(p)}catch(a){console.error("Error al actualizar datos para el nuevo usuario:",a)}finally{d.value=!0}}),ne(async()=>{await N(I.userId),await L(I.userId),await D(I.userId)});async function N(p){try{const a=await E.getUserById(p);t.value=a,d.value=!0}catch(a){console.error(a.response?"Error al obtener al usuario:":"Token no encontrado en localStorage",a)}finally{k.value=!1}}async function L(p){try{const[a,x]=await Promise.all([ge.getServicesByUserId(p),le.getCategories()]);n.value=a.map(v=>{const f=x.find(U=>U.name===v.category);return{...v,categoryDisplay:f?f.display:"Sin categoría"}})}catch(a){console.error(a.response?"Error al obtener los servicios:":"Token no encontrado en localStorage",a)}finally{S.value=!1}}async function D(p){try{const a=await $e.getReviewsByUserId(p),x=await Promise.all(a.map(async v=>{const f=await E.getUserById(v.authorId);return{...v,authorPhoto:f?f.photo:"",authorName:f?f.user_name:""}}));w.value=x}catch(a){console.error(a.response?"Error al obtener las reseñas:":"Token no encontrado en localStorage",a)}finally{C.value=!1}}const h=re(()=>t.value&&t.value.typeOfUser==="Influencer");return(p,a)=>{const x=G,v=ue,f=j,U=ve,z=me,F=fe,M=K,q=W;return d.value?(s(),B(q,{key:0},{default:g(()=>{var T;return[o("div",Be,[o("div",Se,[o("div",Ce,"@"+c((T=t.value)==null?void 0:T.user_name),1),t.value?(s(),B(x,{key:0,src:`${P(V)}${t.value.photo}`,alt:t.value.user_name,width:"250"},null,8,["src","alt"])):r("",!0)]),o("div",Ie,[h.value?(s(),l("div",Re,[a[0]||(a[0]=o("label",{for:"firstname",class:"font-bold"},"Firstname:",-1)),t.value?(s(),l("p",Ue,c(t.value.firstName),1)):r("",!0)])):r("",!0),h.value?(s(),l("div",Pe,[a[1]||(a[1]=o("label",{for:"lastname",class:"font-bold"},"Lastname:",-1)),t.value?(s(),l("p",Ve,c(t.value.lastName),1)):r("",!0)])):r("",!0),o("div",Ne,[o("label",Le,c(h.value?"Username":"Business Name")+":",1),t.value?(s(),l("p",De,c(t.value.user_name),1)):r("",!0)]),o("div",Te,[a[2]||(a[2]=o("label",{for:"email",class:"font-bold"},"Email:",-1)),t.value?(s(),l("p",Ae,c(t.value.email),1)):r("",!0)]),o("div",Ee,[a[3]||(a[3]=o("label",{for:"ruc",class:"font-bold"},"RUC:",-1)),t.value?(s(),l("p",je,c(t.value.ruc),1)):r("",!0)]),h.value?(s(),l("div",Ke,[a[4]||(a[4]=o("label",{for:"phone",class:"font-bold"},"Phone:",-1)),t.value?(s(),l("p",Oe,c(t.value.phone),1)):r("",!0)])):r("",!0),h.value?(s(),l("div",ze,[a[5]||(a[5]=o("label",{for:"birthdate",class:"font-bold"},"Birthdate:",-1)),t.value?(s(),l("p",Fe,c(t.value.birthDate),1)):r("",!0)])):r("",!0),o("div",Me,[a[6]||(a[6]=o("label",{for:"location",class:"font-bold"},"Location:",-1)),t.value?(s(),l("p",qe,c(t.value.location),1)):r("",!0)])])]),h.value?(s(),l("div",We,[o("div",Ge,[a[7]||(a[7]=o("div",{class:"font-bold text-2xl mb-4"},"Services",-1)),_(U,{value:n.value,numVisible:3,numScroll:3,responsiveOptions:O.value},{item:g(i=>[S.value?r("",!0):(s(),l("div",He,[o("div",Je,[o("div",Qe,[o("img",{src:`${P(V)}`+i.data.photo,alt:i.data.name,class:"w-full rounded service-image-size"},null,8,Xe),_(v,{value:i.data.categoryDisplay,class:"absolute",style:{left:"5px",top:"5px"}},null,8,["value"])])]),o("div",Ye,c(i.data.description),1),o("div",Ze,[o("div",et,"$"+c(i.data.price),1),o("span",null,[_(f,{icon:"pi pi-plus",label:"View more",class:"ml-2",onClick:R=>p.$router.push(`/tasks/service/${i.data.id}`)},null,8,["onClick"])])])]))]),_:1},8,["value","responsiveOptions"])])])):r("",!0),o("div",tt,[o("div",ot,[a[10]||(a[10]=o("div",{class:"font-bold text-2xl mb-4"},"Reviews",-1)),w.value.length>0&&!C.value?(s(),l("div",at,[(s(!0),l(ie,null,ce(w.value,i=>(s(),B(M,{key:i.id,class:"mb-4"},{header:g(()=>[o("div",st,[_(z,{image:`${P(V)}${i.authorPhoto}`,shape:"circle",class:"cursor-pointer",onClick:R=>p.$router.push("/user-information/"+i.authorId)},null,8,["image","onClick"]),o("span",{class:"font-bold p-2 cursor-pointer",onClick:R=>p.$router.push("/user-information/"+i.authorId)},c(i.authorName),9,nt)])]),footer:g(()=>[o("div",lt,[o("span",rt,c(i.dateCreated),1)])]),default:g(()=>[o("p",it,c(i.serviceName),1),o("div",ct,[a[8]||(a[8]=o("label",{class:"mr-2 font-semibold"},"Rating:",-1)),_(F,{modelValue:i.stars,"onUpdate:modelValue":R=>i.stars=R,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),o("p",dt,c(i.title),1),o("p",pt,c(i.description),1)]),_:2},1024))),128))])):(s(),l("div",ut,a[9]||(a[9]=[o("p",null,"No reviews yet.",-1)])))])])]}),_:1})):r("",!0)}}});export{It as default};
