import{s as Q}from"./index-ChW50SvV.js";import{B as W,U as T,R as G,x as H,a as s,c as l,b as o,Q as $,m as u,t as c,k as r,n as J,h as B,w as g,A as X,e as _,z as Y,a4 as Z,T as ee,f as te,j as y,d as oe,r as m,g as ae,o as se,C as ne,V as le,u as V,s as P,F as re,i as ie}from"./index-tGn4A1jT.js";import{s as ce}from"./index-CQudeSsu.js";import{s as de}from"./index-C86jlxDl.js";import{s as j}from"./index-Bw3PGiQj.js";import{a as pe,s as ue}from"./index-DLoWA6ri.js";import{s as fe}from"./index-D-OCTWZ5.js";import{s as me}from"./index-D0UplKmH.js";import{s as ve}from"./index-Drds92g8.js";import{U as E}from"./UserService-DX-dhTzX.js";import{S as ge}from"./ServiceService-CNM5YgeI.js";import"./index-CoebC6Ed.js";import"./index-uE_RgOwy.js";import"./index-C5xJpaZd.js";import"./index-uqkg05Wy.js";import"./PhotoService-D-6329la.js";var he=function(t){var n=t.dt;return`
.p-panel {
    border: 1px solid `.concat(n("panel.border.color"),`;
    border-radius: `).concat(n("panel.border.radius"),`;
    background: `).concat(n("panel.background"),`;
    color: `).concat(n("panel.color"),`;
}

.p-panel-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: `).concat(n("panel.header.padding"),`;
    background: `).concat(n("panel.header.background"),`;
    color: `).concat(n("panel.header.color"),`;
    border-style: solid;
    border-width: `).concat(n("panel.header.border.width"),`;
    border-color: `).concat(n("panel.header.border.color"),`;
    border-radius: `).concat(n("panel.header.border.radius"),`;
}

.p-panel-toggleable .p-panel-header {
    padding: `).concat(n("panel.toggleable.header.padding"),`;
}

.p-panel-title {
    line-height: 1;
    font-weight: `).concat(n("panel.title.font.weight"),`;
}

.p-panel-content {
    padding: `).concat(n("panel.content.padding"),`;
}

.p-panel-footer {
    padding: `).concat(n("panel.footer.padding"),`;
}
`)},ye={root:function(t){var n=t.props;return["p-panel p-component",{"p-panel-toggleable":n.toggleable}]},header:"p-panel-header",title:"p-panel-title",headerActions:"p-panel-header-actions",pcToggleButton:"p-panel-toggle-button",contentContainer:"p-panel-content-container",content:"p-panel-content",footer:"p-panel-footer"},be=W.extend({name:"panel",theme:he,classes:ye}),_e={name:"BasePanel",extends:te,props:{header:String,toggleable:Boolean,collapsed:Boolean,toggleButtonProps:{type:Object,default:function(){return{severity:"secondary",text:!0,rounded:!0}}}},style:be,provide:function(){return{$pcPanel:this,$parentInstance:this}}},K={name:"Panel",extends:_e,inheritAttrs:!1,emits:["update:collapsed","toggle"],data:function(){return{id:this.$attrs.id,d_collapsed:this.collapsed}},watch:{"$attrs.id":function(t){this.id=t||T()},collapsed:function(t){this.d_collapsed=t}},mounted:function(){this.id=this.id||T()},methods:{toggle:function(t){this.d_collapsed=!this.d_collapsed,this.$emit("update:collapsed",this.d_collapsed),this.$emit("toggle",{originalEvent:t,value:this.d_collapsed})},onKeyDown:function(t){(t.code==="Enter"||t.code==="NumpadEnter"||t.code==="Space")&&(this.toggle(t),t.preventDefault())}},computed:{buttonAriaLabel:function(){return this.toggleButtonProps&&this.toggleButtonProps.ariaLabel?this.toggleButtonProps.ariaLabel:this.header}},components:{PlusIcon:de,MinusIcon:ce,Button:j},directives:{ripple:G}},we=["id"],ke=["id","aria-labelledby"];function xe(e,t,n,w,d,k){var C=H("Button");return s(),l("div",u({class:e.cx("root")},e.ptmi("root")),[o("div",u({class:e.cx("header")},e.ptm("header")),[$(e.$slots,"header",{id:d.id+"_header",class:J(e.cx("title"))},function(){return[e.header?(s(),l("span",u({key:0,id:d.id+"_header",class:e.cx("title")},e.ptm("title")),c(e.header),17,we)):r("",!0)]}),o("div",u({class:e.cx("headerActions")},e.ptm("headerActions")),[$(e.$slots,"icons"),e.toggleable?(s(),B(C,u({key:0,id:d.id+"_header",class:e.cx("pcToggleButton"),"aria-label":k.buttonAriaLabel,"aria-controls":d.id+"_content","aria-expanded":!d.d_collapsed,unstyled:e.unstyled,onClick:k.toggle,onKeydown:k.onKeyDown},e.toggleButtonProps,{pt:e.ptm("pcToggleButton")}),{icon:g(function(S){return[$(e.$slots,e.$slots.toggleicon?"toggleicon":"togglericon",{collapsed:d.d_collapsed},function(){return[(s(),B(X(d.d_collapsed?"PlusIcon":"MinusIcon"),u({class:S.class},e.ptm("pcToggleButton").icon),null,16,["class"]))]})]}),_:3},16,["id","class","aria-label","aria-controls","aria-expanded","unstyled","onClick","onKeydown","pt"])):r("",!0)],16)],16),_(ee,u({name:"p-toggleable-content"},e.ptm("transition")),{default:g(function(){return[Y(o("div",u({id:d.id+"_content",class:e.cx("contentContainer"),role:"region","aria-labelledby":d.id+"_header"},e.ptm("contentContainer")),[o("div",u({class:e.cx("content")},e.ptm("content")),[$(e.$slots,"default")],16),e.$slots.footer?(s(),l("div",u({key:0,class:e.cx("footer")},e.ptm("footer")),[$(e.$slots,"footer")],16)):r("",!0)],16,ke),[[Z,!d.d_collapsed]])]}),_:3},16)],16)}K.render=xe;const b="/review",$e={async getReviewById(e){return(await y.get(`${b}/${e}`)).data},async getReviewsByServiceId(e){return(await y.get(`${b}/service/${e}`)).data},async getReviewsByUserId(e){return(await y.get(`${b}/influencer/${e}`)).data},async createReview(e){return(await y.post(`${b}`,e)).data},async updateReview(e,t){return(await y.put(`${b}/${e}`,t)).data},async deleteReview(e){return(await y.delete(`${b}/${e}`)).data}},Be={class:"card grid grid-cols-1 md:grid-cols-2 gap-8 items-center h-full"},Ce={class:"flex flex-col items-center justify-center"},Se={class:"font-bold text-2xl mb-4"},Ie={class:"flex justify-center items-center w-64 h-64 rounded-full overflow-hidden"},Re={class:"flex flex-col gap-4"},Ue={key:0,class:"flex flex-wrap gap-2 w-full"},Ve={key:0,id:"firstname",type:"text"},Pe={key:1,class:"flex flex-wrap gap-2 w-full"},Ne={key:0,id:"lastname",type:"text"},Le={class:"flex flex-wrap gap-2 w-full"},Ae={for:"username",class:"font-bold"},De={key:0,id:"username",type:"text"},Te={class:"flex flex-wrap gap-2 w-full"},Ee={key:0,id:"email",type:"text"},je={class:"flex flex-wrap gap-2 w-full"},Ke={key:0,id:"ruc",type:"text"},Oe={key:2,class:"flex flex-wrap gap-2 w-full"},ze={key:0,id:"phone",type:"text"},Fe={key:3,class:"flex flex-wrap gap-2 w-full"},Me={key:0,id:"birthdate",type:"text"},qe={class:"flex flex-wrap gap-2 w-full"},Qe={key:0,id:"location",type:"text"},We={key:0,class:"flex flex-col gap-8 w-full"},Ge={class:"card w-full"},He={key:0,class:"border border-surface-200 dark:border-surface-700 rounded m-2 p-4 flex flex-col h-full"},Je={class:"mb-4 flex-grow"},Xe={class:"relative mx-auto image-container"},Ye=["src","alt"],Ze={class:"mb-4 font-medium flex-grow"},et={class:"flex justify-between items-center mt-auto"},tt={class:"mt-0 font-semibold text-xl"},ot={class:"flex flex-col gap-8 w-full mt-8"},at={class:"card w-full"},st={key:0},nt={class:"flex items-center pl-2"},lt=["onClick"],rt={class:"flex flex-wrap items-center justify-end gap-4"},it={class:"text-surface-500 dark:text-surface-400"},ct={class:"m-0 mb-2 text-surface-500 dark:text-surface-400"},dt={class:"flex items-center mb-4"},pt={class:"font-bold m-0 mb-2"},ut={class:"m-0"},ft={key:1},Ut=oe({__name:"UserView",props:{userId:{}},setup(e){const t=m(null),n=m([]),w=m([]),d=m(!1),k=m(!0),C=m(!0),S=m(!0),I=e,O=m([{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]);ae(()=>I.userId,async p=>{d.value=!1,n.value=[],w.value=[];try{await N(p),await L(p),await A(p)}catch(a){console.error("Error al actualizar datos para el nuevo usuario:",a)}finally{d.value=!0}}),se(async()=>{await N(I.userId),await L(I.userId),await A(I.userId)});async function N(p){try{const a=await E.getUserById(p);t.value=a,d.value=!0}catch(a){console.error(a.response?"Error al obtener al usuario:":"Token no encontrado en localStorage",a)}finally{k.value=!1}}async function L(p){try{const[a,x]=await Promise.all([ge.getServicesByUserId(p),ne.getCategories()]);n.value=a.map(v=>{const f=x.find(U=>U.name===v.category);return{...v,categoryDisplay:f?f.display:"Sin categoría"}})}catch(a){console.error(a.response?"Error al obtener los servicios:":"Token no encontrado en localStorage",a)}finally{C.value=!1}}async function A(p){try{const a=await $e.getReviewsByUserId(p),x=await Promise.all(a.map(async v=>{const f=await E.getUserById(v.authorId);return{...v,authorPhoto:f?f.photo:"",authorName:f?f.user_name:""}}));w.value=x}catch(a){console.error(a.response?"Error al obtener las reseñas:":"Token no encontrado en localStorage",a)}finally{S.value=!1}}const h=le(()=>t.value&&t.value.typeOfUser==="Influencer");return(p,a)=>{const x=ve,v=pe,f=j,U=me,z=fe,F=ue,M=K,q=Q;return d.value?(s(),B(q,{key:0},{default:g(()=>{var D;return[o("div",Be,[o("div",Ce,[o("div",Se,"@"+c((D=t.value)==null?void 0:D.user_name),1),o("div",Ie,[t.value?(s(),B(x,{key:0,src:`${V(P)}${t.value.photo}`,alt:t.value.user_name,width:"250",class:"object-cover"},null,8,["src","alt"])):r("",!0)])]),o("div",Re,[h.value?(s(),l("div",Ue,[a[0]||(a[0]=o("label",{for:"firstname",class:"font-bold"},"Firstname:",-1)),t.value?(s(),l("p",Ve,c(t.value.firstName),1)):r("",!0)])):r("",!0),h.value?(s(),l("div",Pe,[a[1]||(a[1]=o("label",{for:"lastname",class:"font-bold"},"Lastname:",-1)),t.value?(s(),l("p",Ne,c(t.value.lastName),1)):r("",!0)])):r("",!0),o("div",Le,[o("label",Ae,c(h.value?"Username":"Business Name")+":",1),t.value?(s(),l("p",De,c(t.value.user_name),1)):r("",!0)]),o("div",Te,[a[2]||(a[2]=o("label",{for:"email",class:"font-bold"},"Email:",-1)),t.value?(s(),l("p",Ee,c(t.value.email),1)):r("",!0)]),o("div",je,[a[3]||(a[3]=o("label",{for:"ruc",class:"font-bold"},"RUC:",-1)),t.value?(s(),l("p",Ke,c(t.value.ruc),1)):r("",!0)]),h.value?(s(),l("div",Oe,[a[4]||(a[4]=o("label",{for:"phone",class:"font-bold"},"Phone:",-1)),t.value?(s(),l("p",ze,c(t.value.phone),1)):r("",!0)])):r("",!0),h.value?(s(),l("div",Fe,[a[5]||(a[5]=o("label",{for:"birthdate",class:"font-bold"},"Birthdate:",-1)),t.value?(s(),l("p",Me,c(t.value.birthDate),1)):r("",!0)])):r("",!0),o("div",qe,[a[6]||(a[6]=o("label",{for:"location",class:"font-bold"},"Location:",-1)),t.value?(s(),l("p",Qe,c(t.value.location),1)):r("",!0)])])]),h.value?(s(),l("div",We,[o("div",Ge,[a[7]||(a[7]=o("div",{class:"font-bold text-2xl mb-4"},"Services",-1)),_(U,{value:n.value,numVisible:3,numScroll:3,responsiveOptions:O.value},{item:g(i=>[C.value?r("",!0):(s(),l("div",He,[o("div",Je,[o("div",Xe,[o("img",{src:`${V(P)}`+i.data.photo,alt:i.data.name,class:"w-full rounded service-image-size"},null,8,Ye),_(v,{value:i.data.categoryDisplay,class:"absolute",style:{left:"5px",top:"5px"}},null,8,["value"])])]),o("div",Ze,c(i.data.description),1),o("div",et,[o("div",tt,"$"+c(i.data.price),1),o("span",null,[_(f,{icon:"pi pi-plus",label:"View more",class:"ml-2",onClick:R=>p.$router.push(`/tasks/service/${i.data.id}`)},null,8,["onClick"])])])]))]),_:1},8,["value","responsiveOptions"])])])):r("",!0),o("div",ot,[o("div",at,[a[10]||(a[10]=o("div",{class:"font-bold text-2xl mb-4"},"Reviews",-1)),w.value.length>0&&!S.value?(s(),l("div",st,[(s(!0),l(re,null,ie(w.value,i=>(s(),B(M,{key:i.id,class:"mb-4"},{header:g(()=>[o("div",nt,[_(z,{image:`${V(P)}${i.authorPhoto}`,shape:"circle",class:"cursor-pointer",onClick:R=>p.$router.push("/user-information/"+i.authorId)},null,8,["image","onClick"]),o("span",{class:"font-bold p-2 cursor-pointer",onClick:R=>p.$router.push("/user-information/"+i.authorId)},c(i.authorName),9,lt)])]),footer:g(()=>[o("div",rt,[o("span",it,c(i.dateCreated),1)])]),default:g(()=>[o("p",ct,c(i.serviceName),1),o("div",dt,[a[8]||(a[8]=o("label",{class:"mr-2 font-semibold"},"Rating:",-1)),_(F,{modelValue:i.stars,"onUpdate:modelValue":R=>i.stars=R,readonly:""},null,8,["modelValue","onUpdate:modelValue"])]),o("p",pt,c(i.title),1),o("p",ut,c(i.description),1)]),_:2},1024))),128))])):(s(),l("div",ft,a[9]||(a[9]=[o("p",null,"No reviews yet.",-1)])))])])]}),_:1})):r("",!0)}}});export{Ut as default};
