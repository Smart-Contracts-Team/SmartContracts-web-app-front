import{B as K,U as De,a as v,b as f,S as I,g as y,m as b,h as T,a9 as ce,I as ut,aa as Ne,y as Ee,j as w,w as u,A as H,D as de,e as n,a4 as Ae,T as vt,F as pe,t as q,n as ue,l as L,d as mt,r as p,p as ft,i as W,o as bt,C as gt,c as yt,f as l,u as M,X as qe,s as ht,Y as St,ab as Ue,ac as Ct}from"./index-BOLqcSEh.js";import{s as xt}from"./index-B7xLH8pZ.js";import{s as $t}from"./index-HWYFdEig.js";import{b as Pe,a as kt,s as wt}from"./index-B-AtP0Qz.js";import{s as It}from"./index-Dx7G-XK3.js";import{s as Vt}from"./index-DiTs_4UQ.js";import{a as Dt,s as At}from"./index-BO8iARIq.js";import{a as qt,s as Ut}from"./index-CJ-qif5I.js";import{s as Nt}from"./index-BeWZrEpJ.js";import{s as Et}from"./index-BS9PyoXu.js";import{s as Pt}from"./index-QI8tLig9.js";import{s as Tt}from"./index-Bk_O7c5k.js";import{s as Bt}from"./index-BWVrtxJk.js";import{U as Z}from"./UserService-DRNCzvA6.js";import{S as zt}from"./ServiceService-CBhGqO04.js";import"./index-uRgZIMb9.js";import"./PhotoService-CD1hVyHq.js";import"./index-Nbino4Gd.js";import"./index-De1zXoXx.js";import"./index-DDgVDk_4.js";import"./index-Drdwsc4b.js";import"./index-Ck9ebPBA.js";var Lt=function(s){var a=s.dt;return`
.p-steplist {
    position: relative;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 0;
    padding: 0;
    list-style-type: none;
    overflow-x: auto;
}

.p-step {
    position: relative;
    display: flex;
    flex: 1 1 auto;
    align-items: center;
    gap: `.concat(a("stepper.step.gap"),`;
    padding: `).concat(a("stepper.step.padding"),`;
}

.p-step:last-of-type {
    flex: initial;
}

.p-step-header {
    border: 0 none;
    display: inline-flex;
    align-items: center;
    text-decoration: none;
    cursor: pointer;
    transition: background `).concat(a("stepper.transition.duration"),", color ").concat(a("stepper.transition.duration"),", border-color ").concat(a("stepper.transition.duration"),", outline-color ").concat(a("stepper.transition.duration"),", box-shadow ").concat(a("stepper.transition.duration"),`;
    border-radius: `).concat(a("stepper.step.header.border.radius"),`;
    outline-color: transparent;
    background: transparent;
    padding: `).concat(a("stepper.step.header.padding"),`;
    gap: `).concat(a("stepper.step.header.gap"),`;
}

.p-step-header:focus-visible {
    box-shadow: `).concat(a("stepper.step.header.focus.ring.shadow"),`;
    outline: `).concat(a("stepper.step.header.focus.ring.width")," ").concat(a("stepper.step.header.focus.ring.style")," ").concat(a("stepper.step.header.focus.ring.color"),`;
    outline-offset: `).concat(a("stepper.step.header.focus.ring.offset"),`;
}

.p-stepper.p-stepper-readonly .p-step {
    cursor: auto;
}

.p-step-title {
    display: block;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 100%;
    color: `).concat(a("stepper.step.title.color"),`;
    font-weight: `).concat(a("stepper.step.title.font.weight"),`;
    transition: background `).concat(a("stepper.transition.duration"),", color ").concat(a("stepper.transition.duration"),", border-color ").concat(a("stepper.transition.duration"),", box-shadow ").concat(a("stepper.transition.duration"),", outline-color ").concat(a("stepper.transition.duration"),`;
}

.p-step-number {
    display: flex;
    align-items: center;
    justify-content: center;
    color: `).concat(a("stepper.step.number.color"),`;
    border: 2px solid `).concat(a("stepper.step.number.border.color"),`;
    background: `).concat(a("stepper.step.number.background"),`;
    min-width: `).concat(a("stepper.step.number.size"),`;
    height: `).concat(a("stepper.step.number.size"),`;
    line-height: `).concat(a("stepper.step.number.size"),`;
    font-size: `).concat(a("stepper.step.number.font.size"),`;
    z-index: 1;
    border-radius: `).concat(a("stepper.step.number.border.radius"),`;
    position: relative;
    font-weight: `).concat(a("stepper.step.number.font.weight"),`;
}

.p-step-number::after {
    content: " ";
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: `).concat(a("stepper.step.number.border.radius"),`;
    box-shadow: `).concat(a("stepper.step.number.shadow"),`;
}

.p-step-active .p-step-header {
    cursor: default;
}

.p-step-active .p-step-number {
    background: `).concat(a("stepper.step.number.active.background"),`;
    border-color: `).concat(a("stepper.step.number.active.border.color"),`;
    color: `).concat(a("stepper.step.number.active.color"),`;
}

.p-step-active .p-step-title {
    color: `).concat(a("stepper.step.title.active.color"),`;
}

.p-step:not(.p-disabled):focus-visible {
    outline: `).concat(a("focus.ring.width")," ").concat(a("focus.ring.style")," ").concat(a("focus.ring.color"),`;
    outline-offset: `).concat(a("focus.ring.offset"),`;
}

.p-step:has(~ .p-step-active) .p-stepper-separator {
    background: `).concat(a("stepper.separator.active.background"),`;
}

.p-stepper-separator {
    flex: 1 1 0;
    background: `).concat(a("stepper.separator.background"),`;
    width: 100%;
    height: `).concat(a("stepper.separator.size"),`;
    transition: background `).concat(a("stepper.transition.duration"),", color ").concat(a("stepper.transition.duration"),", border-color ").concat(a("stepper.transition.duration"),", box-shadow ").concat(a("stepper.transition.duration"),", outline-color ").concat(a("stepper.transition.duration"),`;
}

.p-steppanels {
    padding: `).concat(a("stepper.steppanels.padding"),`;
}

.p-steppanel {
    background: `).concat(a("stepper.steppanel.background"),`;
    color: `).concat(a("stepper.steppanel.color"),`;
}

.p-stepper:has(.p-stepitem) {
    display: flex;
    flex-direction: column;
}

.p-stepitem {
    display: flex;
    flex-direction: column;
    flex: initial;
}

.p-stepitem.p-stepitem-active {
    flex: 1 1 auto;
}

.p-stepitem .p-step {
    flex: initial;
}

.p-stepitem .p-steppanel-content {
    width: 100%;
    padding: `).concat(a("stepper.steppanel.padding"),`;
    margin-inline-start: 1rem;
}

.p-stepitem .p-steppanel {
    display: flex;
    flex: 1 1 auto;
}

.p-stepitem .p-stepper-separator {
    flex: 0 0 auto;
    width: `).concat(a("stepper.separator.size"),`;
    height: auto;
    margin: `).concat(a("stepper.separator.margin"),`;
    position: relative;
    left: calc(-1 * `).concat(a("stepper.separator.size"),`);
}

.p-stepitem .p-stepper-separator:dir(rtl) {
    left: calc(-9 * `).concat(a("stepper.separator.size"),`);
}

.p-stepitem:has(~ .p-stepitem-active) .p-stepper-separator {
    background: `).concat(a("stepper.separator.active.background"),`;
}

.p-stepitem:last-of-type .p-steppanel {
    padding-inline-start: `).concat(a("stepper.step.number.size"),`;
}
`)},jt={root:function(s){var a=s.props;return["p-stepper p-component",{"p-readonly":a.linear}]},separator:"p-stepper-separator"},_t=K.extend({name:"stepper",theme:Lt,classes:jt}),Ot={name:"BaseStepper",extends:T,props:{value:{type:[String,Number],default:void 0},linear:{type:Boolean,default:!1}},style:_t,provide:function(){return{$pcStepper:this,$parentInstance:this}}},Te={name:"Stepper",extends:Ot,inheritAttrs:!1,emits:["update:value"],data:function(){return{id:this.$attrs.id,d_value:this.value}},watch:{"$attrs.id":function(s){this.id=s||De()},value:function(s){this.d_value=s}},mounted:function(){this.id=this.id||De()},methods:{updateValue:function(s){this.d_value!==s&&(this.d_value=s,this.$emit("update:value",s))},isStepActive:function(s){return this.d_value===s},isStepDisabled:function(){return this.linear}}};function Rt(t,s,a,h,S,c){return v(),f("div",b({class:t.cx("root"),role:"tablist"},t.ptmi("root")),[t.$slots.start?I(t.$slots,"start",{key:0}):y("",!0),I(t.$slots,"default"),t.$slots.end?I(t.$slots,"end",{key:1}):y("",!0)],16)}Te.render=Rt;var Ft={root:"p-steppanels"},Mt=K.extend({name:"steppanels",classes:Ft}),Ht={name:"BaseStepPanels",extends:T,style:Mt,provide:function(){return{$pcStepPanels:this,$parentInstance:this}}},Be={name:"StepPanels",extends:Ht,inheritAttrs:!1};function Kt(t,s,a,h,S,c){return v(),f("div",b({class:t.cx("root")},t.ptmi("root")),[I(t.$slots,"default")],16)}Be.render=Kt;var Xt={root:function(s){var a=s.instance;return["p-steppanel",{"p-steppanel-active":a.isVertical&&a.active}]},content:"p-steppanel-content"},Yt=K.extend({name:"steppanel",classes:Xt}),ze={name:"StepperSeparator",hostName:"Stepper",extends:T};function Gt(t,s,a,h,S,c){return v(),f("span",b({class:t.cx("separator")},t.ptm("separator")),null,16)}ze.render=Gt;var Jt={name:"BaseStepPanel",extends:T,props:{value:{type:[String,Number],default:void 0},asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"}},style:Yt,provide:function(){return{$pcStepPanel:this,$parentInstance:this}}},Le={name:"StepPanel",extends:Jt,inheritAttrs:!1,inject:{$pcStepper:{default:null},$pcStepItem:{default:null},$pcStepList:{default:null}},data:function(){return{isSeparatorVisible:!1}},mounted:function(){if(this.$el){var s,a,h=ce(this.$pcStepper.$el,'[data-pc-name="step"]'),S=ut(this.isVertical?(s=this.$pcStepItem)===null||s===void 0?void 0:s.$el:(a=this.$pcStepList)===null||a===void 0?void 0:a.$el,'[data-pc-name="step"]'),c=Ne(S,h);this.isSeparatorVisible=this.isVertical&&c!==h.length-1}},methods:{getPTOptions:function(s){var a=s==="root"?this.ptmi:this.ptm;return a(s,{context:{active:this.active}})},updateValue:function(s){this.$pcStepper.updateValue(s)}},computed:{active:function(){var s,a,h=this.$pcStepItem?(s=this.$pcStepItem)===null||s===void 0?void 0:s.value:this.value;return h===((a=this.$pcStepper)===null||a===void 0?void 0:a.d_value)},isVertical:function(){return!!this.$pcStepItem},activeValue:function(){var s;return this.isVertical?(s=this.$pcStepItem)===null||s===void 0?void 0:s.value:this.value},id:function(){var s;return"".concat((s=this.$pcStepper)===null||s===void 0?void 0:s.id,"_steppanel_").concat(this.activeValue)},ariaControls:function(){var s;return"".concat((s=this.$pcStepper)===null||s===void 0?void 0:s.id,"_step_").concat(this.activeValue)},a11yAttrs:function(){return{id:this.id,role:"tabpanel","aria-controls":this.ariaControls,"data-pc-name":"steppanel","data-p-active":this.active}}},components:{StepperSeparator:ze}};function Qt(t,s,a,h,S,c){var N=Ee("StepperSeparator");return c.isVertical?(v(),f(pe,{key:0},[t.asChild?I(t.$slots,"default",{key:1,active:c.active,a11yAttrs:c.a11yAttrs,activateCallback:function(i){return c.updateValue(i)}}):(v(),w(vt,b({key:0,name:"p-toggleable-content"},t.ptm("transition")),{default:u(function(){return[H((v(),w(de(t.as),b({id:c.id,class:t.cx("root"),role:"tabpanel","aria-controls":c.ariaControls},c.getPTOptions("root")),{default:u(function(){return[S.isSeparatorVisible?(v(),w(N,{key:0})):y("",!0),n("div",b({class:t.cx("content")},c.getPTOptions("content")),[I(t.$slots,"default",{active:c.active,activateCallback:function(i){return c.updateValue(i)}})],16)]}),_:3},16,["id","class","aria-controls"])),[[Ae,c.active]])]}),_:3},16))],64)):(v(),f(pe,{key:1},[t.asChild?t.asChild&&c.active?I(t.$slots,"default",{key:1,active:c.active,a11yAttrs:c.a11yAttrs,activateCallback:function(i){return c.updateValue(i)}}):y("",!0):H((v(),w(de(t.as),b({key:0,id:c.id,class:t.cx("root"),role:"tabpanel","aria-controls":c.ariaControls},c.getPTOptions("root")),{default:u(function(){return[I(t.$slots,"default",{active:c.active,activateCallback:function(i){return c.updateValue(i)}})]}),_:3},16,["id","class","aria-controls"])),[[Ae,c.active]])],64))}Le.render=Qt;var Wt={name:"Dropdown",extends:Pe,mounted:function(){console.warn("Deprecated since v4. Use Select component instead.")}},Zt={root:"p-steplist"},ea=K.extend({name:"steplist",classes:Zt}),ta={name:"BaseStepList",extends:T,style:ea,provide:function(){return{$pcStepList:this,$parentInstance:this}}},je={name:"StepList",extends:ta,inheritAttrs:!1};function aa(t,s,a,h,S,c){return v(),f("div",b({class:t.cx("root")},t.ptmi("root")),[I(t.$slots,"default")],16)}je.render=aa;var na={root:function(s){var a=s.instance;return["p-step",{"p-step-active":a.active,"p-disabled":a.isStepDisabled}]},header:"p-step-header",number:"p-step-number",title:"p-step-title"},sa=K.extend({name:"step",classes:na}),_e={name:"StepperSeparator",hostName:"Stepper",extends:T};function oa(t,s,a,h,S,c){return v(),f("span",b({class:t.cx("separator")},t.ptm("separator")),null,16)}_e.render=oa;var ra={name:"BaseStep",extends:T,props:{value:{type:[String,Number],default:void 0},disabled:{type:Boolean,default:!1},asChild:{type:Boolean,default:!1},as:{type:[String,Object],default:"DIV"}},style:sa,provide:function(){return{$pcStep:this,$parentInstance:this}}},Oe={name:"Step",extends:ra,inheritAttrs:!1,inject:{$pcStepper:{default:null},$pcStepList:{default:null},$pcStepItem:{default:null}},data:function(){return{isSeparatorVisible:!1}},mounted:function(){if(this.$el&&this.$pcStepList){var s=Ne(this.$el,ce(this.$pcStepper.$el,'[data-pc-name="step"]')),a=ce(this.$pcStepper.$el,'[data-pc-name="step"]').length;this.isSeparatorVisible=s!==a-1}},methods:{getPTOptions:function(s){var a=s==="root"?this.ptmi:this.ptm;return a(s,{context:{active:this.active,disabled:this.isStepDisabled}})},onStepClick:function(){this.$pcStepper.updateValue(this.activeValue)}},computed:{active:function(){return this.$pcStepper.isStepActive(this.activeValue)},activeValue:function(){var s;return this.$pcStepItem?(s=this.$pcStepItem)===null||s===void 0?void 0:s.value:this.value},isStepDisabled:function(){return!this.active&&(this.$pcStepper.isStepDisabled()||this.disabled)},id:function(){var s;return"".concat((s=this.$pcStepper)===null||s===void 0?void 0:s.id,"_step_").concat(this.activeValue)},ariaControls:function(){var s;return"".concat((s=this.$pcStepper)===null||s===void 0?void 0:s.id,"_steppanel_").concat(this.activeValue)},a11yAttrs:function(){return{root:{role:"presentation","aria-current":this.active?"step":void 0,"data-pc-name":"step","data-pc-section":"root","data-p-disabled":this.disabled,"data-p-active":this.active},header:{id:this.id,role:"tab",taindex:this.disabled?-1:void 0,"aria-controls":this.ariaControls,"data-pc-section":"header",disabled:this.disabled,onClick:this.onStepClick}}}},components:{StepperSeparator:_e}},la=["id","tabindex","aria-controls","disabled"];function ia(t,s,a,h,S,c){var N=Ee("StepperSeparator");return t.asChild?I(t.$slots,"default",{key:1,class:ue(t.cx("root")),active:c.active,value:t.value,a11yAttrs:c.a11yAttrs,activateCallback:c.onStepClick}):(v(),w(de(t.as),b({key:0,class:t.cx("root"),"aria-current":c.active?"step":void 0,role:"presentation","data-p-active":c.active,"data-p-disabled":c.isStepDisabled},c.getPTOptions("root")),{default:u(function(){return[n("button",b({id:c.id,class:t.cx("header"),role:"tab",type:"button",tabindex:c.isStepDisabled?-1:void 0,"aria-controls":c.ariaControls,disabled:c.isStepDisabled,onClick:s[0]||(s[0]=function(){return c.onStepClick&&c.onStepClick.apply(c,arguments)})},c.getPTOptions("header")),[n("span",b({class:t.cx("number")},c.getPTOptions("number")),q(c.activeValue),17),n("span",b({class:t.cx("title")},c.getPTOptions("title")),[I(t.$slots,"default")],16)],16,la),S.isSeparatorVisible?(v(),w(N,{key:0})):y("",!0)]}),_:3},16,["class","aria-current","data-p-active","data-p-disabled"]))}Oe.render=ia;const j="/contract",P={async getContractsByInfluencerId(t){return(await L.get(`${j}/influencer/${t}`)).data},async getContractsByBusinessId(t){return(await L.get(`${j}/business/${t}`)).data},async getContractById(t){return(await L.get(`${j}/${t}`)).data},async createContract(t){return(await L.post(`${j}`,t)).data},async updateContract(t,s){return(await L.put(`${j}/${t}`,s)).data},async deleteContract(t){return(await L.delete(`${j}/${t}`)).data}},ca={class:"card"},da={class:"flex flex-col md:flex-row justify-between gap-4"},pa={class:"flex flex-wrap md:justify-start gap-2"},ua={class:"flex items-center gap-2"},va={class:"flex justify-center items-center rounded-full overflow-hidden"},ma={class:"flex space-x-2"},fa={class:"p-4"},ba={class:"mb-4"},ga={key:0,class:"flex flex-col gap-4"},ya={class:"text-gray-700"},ha={class:"text-gray-700"},Sa={class:"text-gray-700"},Ca={class:"text-gray-700"},xa={key:1},$a={class:"card flex justify-center"},ka=["onClick"],wa=["onClick"],Ia={class:"flex flex-col gap-2 mx-auto",style:{"min-height":"16rem","max-width":"20rem"}},Va={class:"field"},Da={class:"flex flex-col gap-6"},Aa={key:0,class:"text-red-500"},qa={key:0,class:"text-red-500"},Ua={key:0,class:"text-red-500"},Na={key:0,class:"text-red-500"},Ea={key:0,class:"text-red-500"},Pa={key:0,class:"text-red-500"},Ta={key:0,class:"text-red-500"},Ba={class:"flex pt-6 justify-end"},za={class:"flex flex-col gap-2 mx-auto",style:{"min-height":"16rem","max-width":"24rem"}},La={class:"flex items-center gap-2"},ja={class:"flex pt-6 justify-between"},_a={class:"flex items-center gap-2"},Oa={class:"flex items-center gap-2"},pn=mt({__name:"UserContracts",setup(t){const s=p(1),a=p(""),h=p(""),S=p({global:{value:null,matchMode:St.CONTAINS}}),c=p(["All","Pending"]),N=p("All"),m=p(!1),i=p({}),X=p(!1),_=p(!1),O=p(!1),R=p(!1),$=p(null),x=p(!1),D=ft(),Y=p([]),ve=p(!1),ee=p(!1),B=p(!1),te=Number(localStorage.getItem("userId")??0),me=p(),z=String(localStorage.getItem("typeOfUser")??"Undefined"),G=p([]),fe=p(),be=p([]),ae=p();W(ae,o=>{i.value.type=o==null?void 0:o.display});const ne=p([]),se=p(null);W(se,o=>{i.value.services=o?[o]:[];const e=Xe();fe.value=e??0,i.value.price=fe.value});const ge=p([]),J=p(null);W(J,async o=>{if(me.value=J.value.id,o){i.value.influencerId=o.id;try{const e=await zt.getServicesByUserId(o.id);ne.value=e.filter(d=>d.state==="active").map(d=>({id:d.id,name:d.name,status:d.state,price:d.price}))}catch(e){console.error("Error fetching services:",e),D.add({severity:"error",summary:"Error",detail:"Could not load services",life:3e3})}}else ne.value=[]});const A=p(null),oe=p(!1);W(A,()=>{Ke()}),bt(async()=>{be.value=await gt.getCategories(),ge.value=(await Z.getUserByType("Influencer")).map(o=>({display:`${o.firstName} ${o.lastName}`,id:o.id})),await he()});function Re(){i.value={},m.value=!1,X.value=!0}function ye(){i.value={},m.value=!1,X.value=!1}const k={titleError:p(""),descriptionError:p(""),typeError:p(""),influencerError:p(""),servicesError:p(""),startDateError:p(""),finalDateError:p("")};function U(o,e,d){Array.isArray(o)?o.some(V=>V==null||typeof V=="string"&&V.trim()===""||typeof V=="number"&&isNaN(V)||V instanceof Date&&isNaN(V.getTime()))?d.value=e:d.value="":o==null||typeof o=="string"&&o.trim()===""||typeof o=="number"&&isNaN(o)||o instanceof Date&&isNaN(o.getTime())?d.value=e:d.value=""}function Fe(){if(m.value=!0,U(i.value.title,"El nombre de contrato es obligatorio",k.titleError),U(i.value.description,"La descripción es obligatoria",k.descriptionError),U(i.value.type,"La categoría es obligatorio",k.typeError),U(i.value.influencerId,"El influencer es obligatorio",k.typeError),U(i.value.services,"El servicio es obligatorio",k.typeError),U(i.value.startDate,"La fecha de inicio es obligatoria",k.startDateError),U(i.value.finalDate,"La fecha de fin es obligatoria",k.finalDateError),U(i.value.type,"La categoría es obligatorio",k.typeError),Object.values(k).some(o=>o.value)){console.log(k);return}}function Me(o){s.value===1&&o===2&&(Fe(),Object.values(k).some(e=>e.value))||(s.value=o)}async function He(){i.value.influencerId=me.value||0,i.value.businessId=te,i.value.status="pending";const o=p({});o.value.businessId=i.value.businessId,o.value.influencerId=i.value.influencerId;try{if(_.value=!0,i.value.id)await P.updateContract(i.value.id,i.value),D.add({severity:"success",summary:"Success",detail:"Contract Updated",life:3e3});else{const e=await P.createContract(i.value),d=await Ue.postSmartContract(o.value);e.hash=d.transactionHash,await P.updateContract(e.id,e),D.add({severity:"success",summary:"Success",detail:"Contract Created",life:3e3})}ye(),await he()}catch(e){D.add({severity:"error",summary:"Error",detail:e.message,life:3e3})}finally{_.value=!1}}async function he(){ee.value=!1,ve.value=!0;try{const o=z==="Influencer"?await P.getContractsByInfluencerId(te):await P.getContractsByBusinessId(te);G.value=await Promise.all(o.map(async e=>{const d=z==="Influencer"?e.businessId:e.influencerId,E=await Z.getUserById(d);return d===e.businessId?{...e,name:E.user_name,photo:E.photo}:{...e,name:E.firstName,photo:E.photo}})),ee.value=!0}catch{D.add({severity:"error",summary:"Error",detail:"Error fetching contracts",life:3e3})}finally{ve.value=!1}}async function Ke(){if(A.value)try{const o=await Z.getUserById(A.value.influencerId),e=await Z.getUserById(A.value.businessId);a.value=o.firstName+o.lastName,h.value=e.user_name}catch(o){console.error("Error fetching user details",o)}}function Xe(){return i.value.services&&i.value.services.length>0?i.value.services.reduce((e,d)=>e+(d.price||0),0):0}const Ye=yt(()=>N.value==="Pending"?G.value.filter(o=>o.status==="pending"):G.value);function Ge(o){$.value=o,O.value=!0}function Je(o){$.value=o,R.value=!0}function Qe(){$.value&&($.value.status="active",P.updateContract($.value.id,$.value).then(()=>{var o;D.add({severity:"success",summary:"Status Updated",detail:`Contract status updated to ${(o=$.value)==null?void 0:o.status}`,life:3e3})}).catch(o=>{D.add({severity:"error",summary:"Error",detail:`Error updating status: ${o.message}`,life:3e3})}).finally(()=>{O.value=!1}))}function We(){$.value&&($.value.status="cancel",P.updateContract($.value.id,$.value).then(()=>{D.add({severity:"success",summary:"Contract Cancelled",detail:"Contract status updated to cancel",life:3e3})}).catch(o=>{D.add({severity:"error",summary:"Error",detail:`Error cancelling contract: ${o.message}`,life:3e3})}).finally(()=>{R.value=!1}))}function Se(){O.value=!1,R.value=!1}function Ze(){Y.value=G.value.map(o=>o.id)}function et(){Y.value=[]}function Ce(o){return o==null||isNaN(o)?"$0.00":o.toLocaleString("en-US",{style:"currency",currency:"USD"})}const xe=o=>{switch(o){case"active":return{severity:"success",label:"Active"};case"pending":return{severity:"warn",label:"Pending"};case"cancel":return{severity:"danger",label:"Cancel"};default:return{severity:"secondary",label:"Undefined"}}},tt=async(o,e)=>{try{console.log(e),oe.value=!0;const d=await Ue.getSmartContractData(e);d&&(A.value={...d,hash:o}),console.log(A)}catch(d){console.error("Error fetching SmartContract data:",d)}};return(o,e)=>{const d=Bt,E=Tt,V=kt,re=Pt,at=wt,C=At,nt=Et,st=Nt,ot=qt,rt=Ut,$e=Dt,Q=Vt,lt=It,ke=Oe,it=je,ct=Pe,we=Wt,Ie=$t,Ve=Le,le=xt,dt=Be,pt=Te,ie=Ct;return v(),f(pe,null,[n("div",ca,[e[22]||(e[22]=n("div",{class:"font-semibold text-xl mb-4"},"Contracts List",-1)),l($e,{expandedRows:Y.value,"onUpdate:expandedRows":e[2]||(e[2]=r=>Y.value=r),value:Ye.value,dataKey:"id",removableSort:"",filters:S.value,tableStyle:"min-width: 60rem",stripedRows:"",paginator:"",rows:10,rowsPerPageOptions:[10,20,50]},{header:u(()=>[n("div",da,[M(z)==="Business"?(v(),w(d,{key:0,label:"New",icon:"pi pi-plus",class:"mr-2",onClick:Re})):y("",!0),l(E,{modelValue:N.value,"onUpdate:modelValue":e[0]||(e[0]=r=>N.value=r),options:c.value,class:"mr-2"},null,8,["modelValue","options"]),l(at,null,{default:u(()=>[l(V,null,{default:u(()=>e[19]||(e[19]=[n("i",{class:"pi pi-search"},null,-1)])),_:1}),l(re,{modelValue:S.value.global.value,"onUpdate:modelValue":e[1]||(e[1]=r=>S.value.global.value=r),placeholder:"Search..."},null,8,["modelValue"])]),_:1}),n("div",pa,[l(d,{text:"",icon:"pi pi-plus",label:"Expand All",onClick:Ze}),l(d,{text:"",icon:"pi pi-minus",label:"Collapse All",onClick:et})])])]),expansion:u(r=>[n("div",fa,[e[20]||(e[20]=n("h5",{class:"font-bold text-l mb-2"},"Contract description:",-1)),n("p",ba,q(r.data.description),1),e[21]||(e[21]=n("h5",{class:"font-bold text-l mb-2"},"Services included:",-1)),l($e,{value:r.data.services,removableSort:""},{default:u(()=>[l(C,{field:"name",header:"Name",sortable:""}),l(C,{field:"description",header:"Description",sortable:""}),l(C,{field:"price",header:"Price",sortable:""},{body:u(g=>[qe(q(Ce(g.data.price)),1)]),_:2},1024),l(C,{field:"stars",header:"Rating",sortable:"",style:{"min-width":"12rem"}},{body:u(g=>[l(rt,{modelValue:g.data.stars,readonly:!0},null,8,["modelValue"])]),_:2},1024)]),_:2},1032,["value"])])]),default:u(()=>[l(C,{expander:"",style:{width:"2rem"}}),l(C,{field:"title",header:"Title",sortable:""}),l(C,{header:M(z)==="Influencer"?"Business":"Influencer",field:"name",sortable:""},{body:u(({data:r})=>[n("div",ua,[n("div",va,[ee.value?(v(),w(nt,{key:0,alt:r.name,src:`${M(ht)}`+r.photo,style:{width:"32px",height:"32px"},class:"object-cover"},null,8,["alt","src"])):(v(),w(st,{key:1,shape:"circle",size:"32"}))]),n("span",null,q(r.name),1)])]),_:1},8,["header"]),l(C,{field:"price",header:"Price",sortable:""},{body:u(r=>[qe(q(Ce(r.data.price)),1)]),_:1}),l(C,{field:"startDate",header:"Start Date",sortable:""}),l(C,{field:"finalDate",header:"Final Date",sortable:""}),l(C,{field:"type",header:"Type",sortable:""}),l(C,{field:"status",header:"Status",sortable:""},{body:u(r=>[l(ot,{value:xe(r.data.status).label,severity:xe(r.data.status).severity},null,8,["value","severity"])]),_:1}),l(C,{header:"Actions"},{body:u(({data:r})=>[n("div",ma,[H(l(d,{icon:"pi pi-file",severity:"info",rounded:"",variant:"outlined","aria-label":"User",onClick:g=>tt(r.hash,r.id)},null,8,["onClick"]),[[ie,"Contract information",void 0,{bottom:!0}]]),M(z)=="Influencer"&&r.status=="pending"?H((v(),w(d,{key:0,icon:"pi pi-check",rounded:"",variant:"outlined","aria-label":"Accept",severity:"success",onClick:g=>Ge(r)},null,8,["onClick"])),[[ie,"Accept contract",void 0,{bottom:!0}]]):y("",!0),M(z)=="Influencer"&&r.status=="pending"?H((v(),w(d,{key:1,icon:"pi pi-times",rounded:"",variant:"outlined","aria-label":"Reject",severity:"danger",onClick:g=>Je(r)},null,8,["onClick"])),[[ie,"Reject contract",void 0,{bottom:!0}]]):y("",!0)])]),_:1})]),_:1},8,["expandedRows","value","filters"])]),l(Q,{visible:oe.value,"onUpdate:visible":e[3]||(e[3]=r=>oe.value=r),style:{width:"500px"},header:"Contract Details",modal:"",draggable:!1,class:"p-fluid"},{footer:u(()=>[l(d,{label:"Cancel",icon:"pi pi-times",text:"",onClick:ye})]),default:u(()=>[A.value?(v(),f("div",ga,[n("div",null,[e[23]||(e[23]=n("label",{class:"block font-bold mb-2"},"Contract ID:",-1)),n("span",ya,q(A.value.contractId),1)]),n("div",null,[e[24]||(e[24]=n("label",{class:"block font-bold mb-2"},"Influencer Name:",-1)),n("span",ha,q(a.value),1)]),n("div",null,[e[25]||(e[25]=n("label",{class:"block font-bold mb-2"},"Business Name:",-1)),n("span",Sa,q(h.value),1)]),n("div",null,[e[26]||(e[26]=n("label",{class:"block font-bold mb-2"},"Hash Contract:",-1)),n("span",Ca,q(A.value.hash),1)])])):(v(),f("div",xa,e[27]||(e[27]=[n("p",null,"No contract data available.",-1)])))]),_:1},8,["visible"]),l(Q,{visible:X.value,"onUpdate:visible":e[14]||(e[14]=r=>X.value=r),style:{width:"50rem"},header:"Contract Information",modal:"",draggable:!1},{default:u(()=>[n("div",$a,[l(pt,{value:s.value,"onUpdate:value":e[13]||(e[13]=r=>s.value=r),class:"basis-[40rem]"},{default:u(()=>[l(it,null,{default:u(()=>[l(ke,{asChild:"",value:1},{default:u(({activateCallback:r,value:g,a11yAttrs:F})=>[n("div",b({class:"flex flex-row flex-auto gap-2"},F.root),[n("button",b({class:"bg-transparent border-0 inline-flex flex-col gap-2",onClick:r},F.header),[n("span",{class:ue(["rounded-full border-2 w-12 h-12 inline-flex items-center justify-center",{"bg-primary text-primary-contrast border-primary":Number(g)<=s.value,"border-surface-200 dark:border-surface-700":Number(g)>s.value}])},e[28]||(e[28]=[n("i",{class:"pi pi-user"},null,-1)]),2)],16,ka),l(lt)],16)]),_:1}),l(ke,{asChild:"",value:2},{default:u(({activateCallback:r,value:g,a11yAttrs:F})=>[n("div",b({class:"flex flex-row pl-2"},F.root),[n("button",b({class:"bg-transparent border-0 inline-flex flex-col gap-2",onClick:r},F.header),[n("span",{class:ue(["rounded-full border-2 w-12 h-12 inline-flex items-center justify-center",{"bg-primary text-primary-contrast border-primary":Number(g)<=s.value,"border-surface-200 dark:border-surface-700":Number(g)>s.value}])},e[29]||(e[29]=[n("i",{class:"pi pi-id-card"},null,-1)]),2)],16,wa)],16)]),_:1})]),_:1}),l(dt,null,{default:u(()=>[l(Ve,{value:1},{default:u(()=>[n("div",Ia,[e[37]||(e[37]=n("div",{class:"text-center mt-4 mb-4 text-xl font-semibold"}," Complete the following information ",-1)),n("div",Va,[n("div",Da,[n("div",null,[e[30]||(e[30]=n("label",{for:"title",class:"block font-bold mb-3"},"Title",-1)),l(re,{id:"title",modelValue:i.value.title,"onUpdate:modelValue":e[4]||(e[4]=r=>i.value.title=r),modelModifiers:{trim:!0},required:"true",autofocus:"",invalid:m.value&&!i.value.title,fluid:""},null,8,["modelValue","invalid"]),m.value&&!i.value.title?(v(),f("small",Aa,"Title is required.")):y("",!0)]),n("div",null,[e[31]||(e[31]=n("label",{for:"description",class:"block font-bold mb-3"},"Description",-1)),l(re,{id:"description",modelValue:i.value.description,"onUpdate:modelValue":e[5]||(e[5]=r=>i.value.description=r),modelModifiers:{trim:!0},required:"true",invalid:m.value&&!i.value.description,fluid:""},null,8,["modelValue","invalid"]),m.value&&!i.value.description?(v(),f("small",qa,"Description is required.")):y("",!0)]),n("div",null,[e[32]||(e[32]=n("label",{for:"type",class:"block font-bold mb-3"},"Type",-1)),l(ct,{modelValue:ae.value,"onUpdate:modelValue":e[6]||(e[6]=r=>ae.value=r),modelModifiers:{trim:!0},options:be.value,optionLabel:"display",placeholder:"Select a Type",checkmark:"",highlightOnSelect:!1,class:"w-full"},null,8,["modelValue","options"]),m.value&&!i.value.type?(v(),f("small",Ua,"Type is required.")):y("",!0)]),n("div",null,[e[33]||(e[33]=n("label",{for:"influencerId",class:"block font-bold mb-3"},"Influencer",-1)),l(we,{modelValue:J.value,"onUpdate:modelValue":e[7]||(e[7]=r=>J.value=r),options:ge.value,filter:"",optionLabel:"display",placeholder:"Select an Influencer",class:"w-full"},null,8,["modelValue","options"]),m.value&&!i.value.influencerId?(v(),f("small",Na," Influencer is required. ")):y("",!0)]),n("div",null,[e[34]||(e[34]=n("label",{for:"services",class:"block font-bold mb-3"},"Service",-1)),l(we,{modelValue:se.value,"onUpdate:modelValue":e[8]||(e[8]=r=>se.value=r),options:ne.value,filter:"",optionLabel:"name",placeholder:"Select an Service",class:"w-full"},null,8,["modelValue","options"]),m.value&&!i.value.services?(v(),f("small",Ea," Service is required. ")):y("",!0)]),n("div",null,[e[35]||(e[35]=n("label",{for:"startDate",class:"block font-bold mb-3"},"Start Date",-1)),l(Ie,{id:"startDate",modelValue:i.value.startDate,"onUpdate:modelValue":e[9]||(e[9]=r=>i.value.startDate=r),required:"true",invalid:m.value&&!i.value.startDate,showIcon:"",fluid:"",iconDisplay:"input"},null,8,["modelValue","invalid"]),m.value&&!i.value.startDate?(v(),f("small",Pa,"Start Date is required.")):y("",!0)]),n("div",null,[e[36]||(e[36]=n("label",{for:"finalDate",class:"block font-bold mb-3"},"Final Date",-1)),l(Ie,{id:"finalDate",modelValue:i.value.finalDate,"onUpdate:modelValue":e[10]||(e[10]=r=>i.value.finalDate=r),required:"true",invalid:m.value&&!i.value.finalDate,showIcon:"",fluid:"",iconDisplay:"input"},null,8,["modelValue","invalid"]),m.value&&!i.value.finalDate?(v(),f("small",Ta,"Final Date is required.")):y("",!0)])])])]),n("div",Ba,[l(d,{label:"Next",icon:"pi pi-arrow-right",iconPos:"right",onClick:e[11]||(e[11]=r=>Me(2))})])]),_:1}),l(Ve,{value:2},{default:u(({activateCallback:r})=>[n("div",za,[e[39]||(e[39]=n("div",{class:"text-center mt-4 mb-4 text-xl font-semibold"}," Aviso Importante sobre la Creación de Contratos ",-1)),e[40]||(e[40]=n("p",{class:"mb-4"}," Al proceder con la creación del contrato a través de nuestra plataforma, usted, como representante de su empresa, acepta y se compromete a asumir la totalidad de los costos asociados con el mismo. Es importante destacar que Smart Contracts actúa únicamente como intermediario tecnológico para la generación y gestión de contratos digitales. ",-1)),e[41]||(e[41]=n("p",{class:"mb-2 font-bold text-xl"},"Limitación de Responsabilidad",-1)),e[42]||(e[42]=n("p",{class:"mb-4"}," Smart Contracts no se hace responsable en caso de que el influencer decida no aceptar el contrato emitido. Para evitar posibles inconvenientes, recomendamos encarecidamente que su empresa mantenga conversaciones previas con el influencer. Estas conversaciones deben servir para acordar claramente los términos del servicio, incluyendo detalles como: ",-1)),e[43]||(e[43]=n("ul",null,[n("li",null,"La naturaleza y alcance del servicio solicitado."),n("li",null,"Las fechas de inicio y finalización del contrato."),n("li",null,"Los entregables esperados."),n("li",null,"Las condiciones de pago y cualquier otra cláusula relevante.")],-1)),e[44]||(e[44]=n("p",{class:"mb-2 font-bold text-xl"},"Recomendación",-1)),e[45]||(e[45]=n("p",{class:"mb-4"}," Un acuerdo verbal o por escrito previo entre su empresa y el influencer puede evitar malentendidos y asegurar una mayor probabilidad de aceptación del contrato. Una vez emitido, el contrato se considera vinculante según los términos establecidos en la plataforma, siempre que ambas partes lo acepten. ",-1)),e[46]||(e[46]=n("p",{class:"mb-4"}," Al continuar con la creación del contrato, confirma que ha leído y comprendido este aviso, y acepta proceder bajo las condiciones aquí descritas. Para cualquier duda o consulta adicional, no dude en comunicarse con nuestro equipo de soporte. ",-1)),n("div",La,[l(le,{modelValue:x.value,"onUpdate:modelValue":e[12]||(e[12]=g=>x.value=g),invalid:!x.value,binary:""},null,8,["modelValue","invalid"]),e[38]||(e[38]=n("label",{for:"size_normal",class:"size_normal"},"Acepto los términos y condiciones del contrato.",-1))])]),n("div",ja,[l(d,{label:"Back",severity:"secondary",icon:"pi pi-arrow-left",onClick:g=>r(1)},null,8,["onClick"]),l(d,{label:_.value?"Registering...":"Register",icon:"pi pi-check",loading:_.value,disabled:_.value||!x.value,onClick:He},null,8,["label","loading","disabled"])])]),_:1})]),_:1})]),_:1},8,["value"])])]),_:1},8,["visible"]),l(Q,{visible:O.value,"onUpdate:visible":e[16]||(e[16]=r=>O.value=r),header:"Confirm Acceptance of Contract",modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},closable:!1,draggable:!1},{footer:u(()=>[l(d,{label:"Cancel",icon:"pi pi-times",onClick:Se}),l(d,{icon:"pi pi-check",label:B.value?"Updating...":"Confirm",loading:B.value,disabled:B.value||!x.value,onClick:Qe},null,8,["label","loading","disabled"])]),default:u(()=>[e[48]||(e[48]=n("p",{class:"mb-8"}," Antes de aceptar este contrato, le solicitamos que lea atentamente todos los términos y condiciones establecidos en el mismo. Al aceptar el contrato, usted está confirmando que comprende completamente los servicios y tareas que se le asignarán, los cuales están detalladamente especificados en el documento. Asegúrese de estar conforme con las responsabilidades y expectativas que conlleva el contrato, ya que cualquier incumplimiento podría generar consecuencias. ",-1)),e[49]||(e[49]=n("p",{class:"mb-2 font-bold text-xl"},"Responsabilidad de Cancelación",-1)),e[50]||(e[50]=n("p",{class:"mb-8"}," SmartContracts no se hace responsable por la cancelación de este contrato. En caso de que desee cancelar o modificar los términos acordados, es fundamental que se comunique directamente con la empresa solicitante. Ambas partes deberán llegar a un acuerdo mutuo sobre la cancelación, de acuerdo con lo estipulado en el contrato. ",-1)),e[51]||(e[51]=n("p",{class:"mb-2 font-bold text-xl"},"Compromiso y Confidencialidad",-1)),e[52]||(e[52]=n("p",{class:"mb-8"}," Es importante destacar que este contrato puede implicar la divulgación de información sensible o exclusiva. Por lo tanto, se espera que mantenga la confidencialidad respecto a cualquier información relacionada con la empresa contratante y el alcance de los servicios que se le soliciten. Cualquier incumplimiento en este aspecto podría generar penalizaciones o la terminación del contrato de manera anticipada. ",-1)),e[53]||(e[53]=n("p",{class:"mb-2 font-bold text-xl"},"Condiciones Adicionales",-1)),e[54]||(e[54]=n("p",{class:"mb-4"}," Además, le recordamos que la naturaleza de los contratos SmartContracts implica una ejecución automática de los términos una vez que ambas partes han dado su consentimiento. De esta manera, SmartContracts actúa como un facilitador para que el acuerdo sea validado de forma segura y transparente. ",-1)),e[55]||(e[55]=n("p",{class:"mb-8"}," Le recomendamos que, en caso de tener dudas sobre algún aspecto del contrato, consulte con un abogado o experto legal antes de proceder con la aceptación. Al aceptar el contrato, usted está comprometido con los términos aquí expuestos y será responsable de cumplir con todas las obligaciones acordadas. ",-1)),e[56]||(e[56]=n("p",{class:"mb-2 font-bold text-xl"}," Asegúrese de leer todo el contrato cuidadosamente antes de aceptar. ",-1)),e[57]||(e[57]=n("p",{class:"mb-8"}," Si está de acuerdo con los términos y condiciones detallados, puede proceder con la aceptación. ",-1)),n("div",_a,[l(le,{modelValue:x.value,"onUpdate:modelValue":e[15]||(e[15]=r=>x.value=r),invalid:!x.value,binary:""},null,8,["modelValue","invalid"]),e[47]||(e[47]=n("label",{for:"size_normal",class:"size_normal"},"Acepto los términos y condiciones del contrato.",-1))])]),_:1},8,["visible"]),l(Q,{visible:R.value,"onUpdate:visible":e[18]||(e[18]=r=>R.value=r),header:"Confirm Acceptance of Contract",modal:"",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"},closable:!1,draggable:!1},{footer:u(()=>[l(d,{label:"Cancel",icon:"pi pi-times",onClick:Se}),l(d,{icon:"pi pi-check",label:B.value?"Updating...":"Reject Contract",loading:B.value,disabled:B.value||!x.value,onClick:We},null,8,["label","loading","disabled"])]),default:u(()=>[e[59]||(e[59]=n("p",{class:"mb-4"}," Al proceder con el rechazo de este contrato, usted reconoce que esta acción es irreversible. Una vez que el contrato sea rechazado, no podrá ser restaurado ni modificado. ",-1)),e[60]||(e[60]=n("p",{class:"mb-4"}," Smart Contracts no se hace responsable de los costos ni consecuencias derivados de esta decisión, incluyendo pero no limitado a tarifas de transacción, costos operativos o cualquier otra implicación financiera o legal que pueda surgir como resultado del rechazo del contrato. ",-1)),e[61]||(e[61]=n("p",{class:"mb-4"}," Le recomendamos que revise cuidadosamente todos los términos y condiciones del contrato antes de tomar esta decisión. Si tiene alguna duda, por favor, consulte con un asesor legal o de confianza antes de proceder. ",-1)),e[62]||(e[62]=n("p",{class:"mb-4"}," Al continuar con el rechazo, usted acepta que Smart Contracts no asume ninguna responsabilidad por cualquier daño o perjuicio que pueda resultar de esta acción. ",-1)),n("div",Oa,[l(le,{modelValue:x.value,"onUpdate:modelValue":e[17]||(e[17]=r=>x.value=r),invalid:!x.value,binary:""},null,8,["modelValue","invalid"]),e[58]||(e[58]=n("label",{for:"size_normal",class:"size_normal"},"Acepto los términos y condiciones del contrato.",-1))])]),_:1},8,["visible"])],64)}}});export{pn as default};
